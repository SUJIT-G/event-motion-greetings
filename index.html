<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Event Motion Greetings ‚ú®</title>
    <meta name="description" content="Create and share beautiful animated greetings for any occasion!">
    
    <meta property="og:title" content="A Special Greeting For You! üíå">
    <meta property="og:description" content="Someone has sent you a beautiful, animated greeting card. Click to view it!">
    <meta property="og:image" content="https://i.imgur.com/vXI8t19.png"> 
    <meta property="og:type" content="website">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Poppins:wght@400;600&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">

    <style>
        :root {
            --card-bg: rgba(255, 255, 255, 0.1);
            --text-light: #ffffff;
            --text-dark: #333;
            --shadow: rgba(0, 0, 0, 0.2);
            --accent-gold: #FFD700;
        }
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-light);
            text-align: center;
            transition: background 0.8s ease;
            overflow: hidden;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- THEME STYLES --- */
        body.theme-birthday { background: linear-gradient(43deg, #4158D0 0%, #C850C0 46%, #FFCC70 100%); }
        body.theme-wedding { background: linear-gradient(to top, #3c2a6d, #1e133a); }
        body.theme-diwali { background: linear-gradient(to top, #2c0430, #000000); }

        /* --- MOTION BACKGROUNDS --- */
        .motion-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: -1; opacity: 0; transition: opacity 0.8s ease; }
        body.theme-birthday .motion-background#bg-birthday,
        body.theme-wedding .motion-background#bg-wedding,
        body.theme-diwali .motion-background#bg-diwali { opacity: 1; }

        /* Background Elements */
        #bg-birthday .confetti { position: absolute; width: 10px; height: 20px; background-color: var(--accent-gold); opacity: 0.7; animation: confetti-fall 8s linear infinite; }
        #bg-birthday .confetti:nth-child(2n) { background-color: #f94144; animation-duration: 10s; }
        @keyframes confetti-fall { 0% { transform: translateY(-100px) rotateZ(0deg); } 100% { transform: translateY(100vh) rotateZ(720deg); } }
        
        #bg-wedding .particle { position: absolute; border-radius: 50%; background: rgba(255, 215, 0, 0.4); bottom: -100px; animation: move-up 10s linear infinite; }
        @keyframes move-up { 100% { transform: translateY(-100vh) scale(0.5); } }

        #bg-diwali .star { position: absolute; background: white; border-radius: 50%; animation: twinkle 5s infinite; }
        @keyframes twinkle { 50% { opacity: 0.2; } }

        /* --- UI STYLES --- */
        .view { width: 100%; max-width: 550px; padding: 20px; display: none; animation: fadeIn 0.8s ease; }
        .view.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        h1, h2 { font-family: 'Playfair Display', serif; text-shadow: 0 2px 10px var(--shadow); }
        h1 { font-size: 2.8em; margin-bottom: 10px; }
        h2 { font-size: 1.5em; opacity: 0.9; margin-bottom: 30px; }

        .event-buttons { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
        .event-btn { background: var(--card-bg); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 15px; padding: 20px; color: var(--text-light); font-size: 1.3em; font-weight: 600; cursor: pointer; transition: transform 0.3s ease, background 0.3s ease; width: 150px; }
        .event-btn:hover { transform: translateY(-10px); background: rgba(255, 255, 255, 0.2); }
        .event-btn span { font-size: 2em; display: block; margin-bottom: 10px; }

        .form-container, .greeting-card { background: var(--card-bg); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.2); border-radius: 20px; padding: 30px; box-shadow: 0 8px 32px 0 var(--shadow); }
        .input-group { margin-bottom: 20px; text-align: left; }
        .input-field { width: 100%; padding: 12px 15px; border-radius: 10px; border: 1px solid rgba(255, 255, 255, 0.3); background: rgba(0, 0, 0, 0.2); color: var(--text-light); font-size: 1em; }
        
        /* --- GREETING CARD & ELEMENTS --- */
        .greeting-card { position: relative; overflow: hidden; min-height: 480px; display: flex; flex-direction: column; justify-content: center; }
        .card-content { position: relative; z-index: 2; }
        .greeting-card .recipient-name { font-family: 'Dancing Script', cursive; font-size: 3em; color: var(--accent-gold); text-shadow: 0 0 15px var(--accent-gold); }
        .event-elements { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 1; }
        
        /* Birthday Elements */
        .cake-icon { position: absolute; bottom: 20px; left: 50%; width: 100px; height: 100px; background: url('https://i.postimg.cc/JhDYj5pN/birthday-cake.png') no-repeat center/contain; transform: translateX(-50%) scale(0) translateY(100px); opacity: 0; transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), opacity 0.5s ease; }
        .cake-icon.visible { transform: translateX(-50%) scale(1) translateY(0); opacity: 1; }
        .balloon { position: absolute; bottom: -150px; width: 70px; height: 90px; background: url('https://i.postimg.cc/zXPfxTwm/balloons.png') no-repeat center/contain; animation: float-up 10s linear infinite; }
        @keyframes float-up { 100% { transform: translateY(-120vh) rotate(15deg); } }

        /* Wedding Element */
        .flower-petal { position: absolute; top: -50px; width: 40px; height: 40px; background: url('https://i.postimg.cc/g0ysyzCq/flower-petal1.png') no-repeat center/contain; animation: flower-fall 12s linear infinite; }
        @keyframes flower-fall { 100% { transform: translateY(120vh) rotateZ(360deg); opacity: 0; } }
        
        /* Diwali Elements */
        .diya { position: absolute; bottom: 15px; width: 60px; height: 60px; background: url('https://i.postimg.cc/m256VJMq/diwali-sparkel.png') no-repeat center/contain; animation: diya-float 4s ease-in-out infinite; }
        @keyframes diya-float { 50% { transform: translateY(-15px); } }
        .sparkle { position: absolute; top: -20px; width: 3px; height: 3px; background: gold; border-radius: 50%; box-shadow: 0 0 10px gold; animation: sparkle-fall 5s linear infinite; }
        @keyframes sparkle-fall { 100% { transform: translateY(100vh); opacity: 0; } }

        /* --- BUTTONS & CONTROLS --- */
        .whatsapp-btn { background: linear-gradient(45deg, #25D366, #128C7E); color: white; border: none; border-radius: 30px; padding: 12px 30px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: transform 0.2s ease, box-shadow 0.2s ease; margin-top: 20px; }
        .whatsapp-btn:hover { transform: scale(1.05); box-shadow: 0 0 20px #25D366; }
        
        #music-toggle { position: fixed; top: 20px; right: 20px; background: rgba(0,0,0,0.4); color: white; border: 1px solid white; width: 45px; height: 45px; border-radius: 50%; font-size: 20px; cursor: pointer; z-index: 100; display: flex; align-items: center; justify-content: center; }
        .back-btn { font-size: 0.9em; background: none; border: none; color: var(--text-light); opacity: 0.7; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body class="theme-birthday">

    <!-- Motion Backgrounds -->
    <div class="motion-background" id="bg-birthday"></div>
    <div class="motion-background" id="bg-wedding"></div>
    <div class="motion-background" id="bg-diwali"></div>

    <!-- Audio Player and Control -->
    <audio id="bg-music" loop></audio>
    <button id="music-toggle">üéµ</button>

    <main>
        <!-- VIEW 1: Event Selection -->
        <div id="event-selector" class="view active">
            <h1>Create a Greeting</h1>
            <h2>Choose an event to celebrate</h2>
            <div class="event-buttons">
                <button class="event-btn" onclick="selectEvent('birthday')"><span>üéÇ</span>Birthday</button>
                <button class="event-btn" onclick="selectEvent('wedding')"><span>üíç</span>Wedding</button>
                <button class="event-btn" onclick="selectEvent('diwali')"><span>ü™î</span>Diwali</button>
            </div>
        </div>

        <!-- VIEW 2: Customization Form -->
        <div id="customization-form" class="view">
            <div class="form-container">
                <h1 id="form-title">Customize Greeting</h1>
                <div class="input-group">
                    <label id="label-recipient" for="recipient">Recipient's Name</label>
                    <input type="text" id="recipient" class="input-field" placeholder="e.g., Jane Doe">
                </div>
                <div class="input-group">
                    <label for="sender">Your Name</label>
                    <input type="text" id="sender" class="input-field" placeholder="e.g., John Smith">
                </div>
                <button class="whatsapp-btn" style="background:var(--accent-gold); color:var(--text-dark);" onclick="generateGreeting()">Generate Card ‚ú®</button>
            </div>
            <button class="back-btn" onclick="showView('event-selector')">‚Üê Back to event selection</button>
        </div>

        <!-- VIEW 3: Final Greeting Card -->
        <div id="greeting-card-display" class="view">
            <div class="greeting-card">
                <div class="event-elements"></div>
                <div class="card-content">
                    <p id="card-intro-text"></p>
                    <h1 id="card-recipient" class="recipient-name"></h1>
                    <p id="card-sender" class="sender-name"></p>
                </div>
                <div class="cake-icon"></div>
                <button class="whatsapp-btn" onclick="shareOnWhatsApp()">üíö Share on WhatsApp</button>
            </div>
            <button class="back-btn" onclick="resetAndGoHome()">üéâ Create Another Greeting</button>
        </div>
    </main>

    <script>
        const THEMES = {
            birthday: {
                themeClass: 'theme-birthday',
                formTitle: 'Birthday Greeting',
                recipientLabel: "Birthday Person's Name",
                cardIntro: 'A very happy birthday to you,',
                musicSrc: 'https://cdn.pixabay.com/download/audio/2022/08/23/audio_8379133a88.mp3' // Happy, upbeat music
            },
            wedding: {
                themeClass: 'theme-wedding',
                formTitle: 'Wedding Wishes',
                recipientLabel: "Couple's Names",
                cardIntro: 'With heartfelt congratulations,',
                musicSrc: 'https://cdn.pixabay.com/download/audio/2022/11/17/audio_62f63842f2.mp3' // Romantic, elegant music
            },
            diwali: {
                themeClass: 'theme-diwali',
                formTitle: 'Diwali Greeting',
                recipientLabel: "Recipient's Name",
                cardIntro: 'Wishing you a sparkling Diwali,',
                musicSrc: 'https://cdn.pixabay.com/download/audio/2023/11/09/audio_b2eea6e6d2.mp3' // Indian festive music
            }
        };

        let currentEvent = 'birthday';
        let greetingData = {};

        const audioPlayer = document.getElementById('bg-music');
        const musicToggle = document.getElementById('music-toggle');
        const elementsContainer = document.querySelector('.event-elements');
        const cakeIcon = document.querySelector('.cake-icon');

        // --- BACKGROUND & MUSIC ---
        function createParticles(containerId, count, particleClass) { /* ... function to create bg particles ... */ }
        createParticles('bg-birthday', 70, 'confetti');
        createParticles('bg-wedding', 40, 'particle');
        (function createStars() { const c = document.getElementById('bg-diwali'); for(let i=0;i<80;i++){ const s = document.createElement('div'); s.className='star'; const z=Math.random()*3; s.style.width=`${z}px`;s.style.height=`${z}px`;s.style.left=`${Math.random()*100}%`;s.style.top=`${Math.random()*100}%`;s.style.animationDelay=`${Math.random()*5}s`;c.appendChild(s);}})();

        musicToggle.addEventListener('click', () => {
            if (audioPlayer.paused) {
                audioPlayer.play();
                musicToggle.innerHTML = 'üéµ';
            } else {
                audioPlayer.pause();
                musicToggle.innerHTML = 'üîá';
            }
        });

        // --- VIEW MANAGEMENT ---
        function showView(viewId) { document.querySelectorAll('.view').forEach(v => v.classList.remove('active')); document.getElementById(viewId).classList.add('active'); }
        
        function selectEvent(eventType) {
            currentEvent = eventType;
            const theme = THEMES[eventType];
            document.body.className = theme.themeClass;
            document.getElementById('form-title').innerText = theme.formTitle;
            document.getElementById('label-recipient').innerText = theme.recipientLabel;
            
            // Set and play music for the theme
            audioPlayer.src = theme.musicSrc;
            audioPlayer.play().catch(e => console.log("Autoplay blocked. User must interact first."));
            musicToggle.innerHTML = 'üéµ';

            showView('customization-form');
        }

        // --- DYNAMIC ELEMENT CREATION ---
        function clearEventElements() { elementsContainer.innerHTML = ''; cakeIcon.classList.remove('visible'); }
        function createBalloons(c) { for(let i=0;i<c;i++){const b=document.createElement('div');b.className='balloon';b.style.left=`${Math.random()*80+10}%`;b.style.animationDelay=`${Math.random()*5}s`;b.style.animationDuration=`${Math.random()*5+8}s`;elementsContainer.appendChild(b);}}
        function createFlowers(c) { for(let i=0;i<c;i++){const f=document.createElement('div');f.className='flower-petal';f.style.left=`${Math.random()*100}%`;f.style.animationDelay=`${Math.random()*10}s`;f.style.animationDuration=`${Math.random()*8+10}s`;elementsContainer.appendChild(f);}}
        function createDiyas(c) { const w = elementsContainer.offsetWidth; for(let i=0;i<c;i++){const d=document.createElement('div');d.className='diya'; d.style.left=`${(w/(c+1))*(i+1)-30}px`; d.style.animationDelay=`${i*0.5}s`; elementsContainer.appendChild(d);}}
        function createSparkles(c) { for(let i=0;i<c;i++){const s=document.createElement('div');s.className='sparkle'; s.style.left=`${Math.random()*100}%`;s.style.animationDelay=`${Math.random()*5}s`;s.style.animationDuration=`${Math.random()*3+3}s`;elementsContainer.appendChild(s);}}

        // --- GREETING GENERATION ---
        function generateGreeting() {
            const recipient = document.getElementById('recipient').value.trim();
            const sender = document.getElementById('sender').value.trim();
            if (!recipient || !sender) { alert('Please fill in both names.'); return; }

            const theme = THEMES[currentEvent];
            greetingData = { recipient, sender, event: currentEvent };
            
            document.getElementById('card-intro-text').innerText = theme.cardIntro;
            document.getElementById('card-recipient').innerText = recipient;
            document.getElementById('card-sender').innerText = `With love, from ${sender}`;
            
            clearEventElements();
            if (currentEvent === 'birthday') { setTimeout(() => cakeIcon.classList.add('visible'), 200); createBalloons(6); } 
            else if (currentEvent === 'wedding') { createFlowers(12); } 
            else if (currentEvent === 'diwali') { createDiyas(3); createSparkles(20); }
            
            showView('greeting-card-display');
        }
        
        function resetAndGoHome() { clearEventElements(); showView('event-selector'); }

        // --- WHATSAPP SHARING FUNCTIONALITY ---
        function shareOnWhatsApp() {
            const { recipient, sender, event } = greetingData;
            let text = '';
            
            switch(event) {
                case 'birthday':
                    text = `üéÇ *Happy Birthday, ${recipient}!* üéÇ\n\n${sender} has sent you a special birthday greeting! üéâ\n\nHope you have a fantastic day filled with joy and laughter. ‚ú®\n\nClick to see your animated card! üëá`;
                    break;
                case 'wedding':
                    text = `üíç *Congratulations, ${recipient}!* üíç\n\n${sender} is sending heartfelt wishes on your wedding day! ‚ù§Ô∏è\n\nWishing you a lifetime of love and happiness together. ‚ú®\n\nClick to see your animated card! üëá`;
                    break;
                case 'diwali':
                    text = `ü™î *Happy Diwali, ${recipient}!* ü™î\n\n${sender} wishes you a Diwali filled with light, joy, and prosperity! ‚ú®\n\nMay the festival of lights brighten up your life. üåü\n\nClick to see your animated card! üëá`;
                    break;
                default:
                    text = `A special greeting for you from ${sender}!`;
            }

            const url = `https://wa.me/?text=${encodeURIComponent(text + '\n' + window.location.href)}`;
            window.open(url, '_blank');
        }
    </script>
</body>
</html>
